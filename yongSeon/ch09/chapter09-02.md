## 바운디드 컨텍스트간의 관계
- 바운디드 컨텍스트는 어떤 식으로는 연결된다.
- 아래와 같은 API를 제공하는 서비스가 있다고 가정하자.
  - 카탈로그 서비스
  - 추천 서비스

|   바운디드 컨텍스트    |위치|
|:--------------:|:---:|
| 카탈로그 바운디드 컨텍스트 |하류|
|  추천 바운디드 컨텍스트  |상류|

- 하류 컴포넌트인 카탈로그 컨텍스트는 상류 컴포넌트인 추천 컨텍스트가 주는 데이터와 기능에 의존한다. 
- REST API 의 인터페이스가 바뀌면 카탈로그 시스템의 코드도 바뀌게 된다.
- 공급자(추천 컨텍스트)가 마음대로 API를 변경하게 되면 고객(카탈로그 컨텍스트)도 변경해야 되므로 우선순위가 높은 기능을 개발하지 못할 수 있다.
반대로 복잡한 절차를 거치고 승낙해야된다면 개발시도를 하지 않을 수도 있다.
- 개발 계획을 공유하고 일정을 협의함으로 방지해야 한다.

### 공유 방법
- 상류 컴포턴트는 하류 컴포넌트가 사용하는 프로토콜을 정의하고 공개한다.
- 상류 팀 아래의 고객이 다수 존재하면 여러 하류 팀의 요구사항을 만족하는 API를 만들고 서비스 형태로 공개하여
서비스의 일관성 유지 가능 공개 호스트 서비스라고 불림

### 공개 호스트 서비스
![img_5.png](image%2Fimg_5.png)
- 상류 컴포넌트 서비스는 상류 바운디드 컨텍스트의 도메인 모델을 따름.
- 하류 컴포넌트는 상류 서비스 모델이 자신의 서비스 모델에 영향을 완충지대를 만들어야함

![img_2.png](image%2Fimg_2.png)
- RecSystemClient는 외부 시스템과의 연동을 처리함으로써 외부 시스템의 도메인 모델이 하류 시스템의 도메인 모델을
영향을 주지 않도록 한다.
- 안티코럽션 레이어(ACL)이라고도 불림, 손상 방지 계층
- 두 바운디드 컨텍스트가 공유하는 경우도 있다. 예시로 운영자를 위한 주문 관리 시스템이 있다고 하자. 이 시스템은
고객 주문 시스템과 팀이 다르다고 가정한다면 두팀이 주문을 표현하는 중복된 모델을 공유함으로써 중복설계를 방지 가능
- 이처럼 두 바운디드 컨텍스트에서 공유하는 모델을 공유 커널이라고 부른다.
- 단점은 공유 커널을 변경하면 두 바운디드 컨텍스트 모두 영향을 받는다. 그렇기 때문에 밀접한 관계를 가져야한다.

### 독립 방식
- 서로 다른 바운디드 컨텍스트끼리 통합하지 않고 독립적으로 모델을 사용하는 방법이다.
- 두 바운디드 컨텍스트 간에 통합은 수동으로 이루어진다.

> **쇼핑몰 솔루션 시스템** <--판매 정보를 전달-- **운영자** --수동으로 입력--> **외부 ERP 시스템**
- 서비스 규모가 커질수록 수동통합에는 한계가 존재하기 때문에 중간에 별도 시스템을 만들가능성이 크다.
> **쇼핑몰 솔루션 시스템** <--판매 정보 로딩-- **통합시스템** --수동으로 입력--> **외부 ERP 시스템**

## 컨텍스트 맵
- 개별 바운디드 컨텍스트에 매몰되면 단편적인 부분만 보고 성급한 결정을 내리기 쉽다.
- 컨텍스트 맵을 통해 바운디드 컨텍스트 간의 관계를 파악할 수 있다.
- 컨텍스트 맵은 시스템의 전체 구조를 보여줌

### 장점
- 하위 도메인과 일치하지 않는 바운디드 컨텍스트를 찾아 도메인에 맞게 조절하기 쉬움
- 사업의 핵심 도메인을 위해 어떤 바운디드 컨텍스트 효율적으로 조직 역량을 사용할지 결정하기 쉬움. 